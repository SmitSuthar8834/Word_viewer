{"ast":null,"code":"var _ = require(\"underscore\");\nvar promises = require(\"./promises\");\nvar Html = require(\"./html\");\nexports.imgElement = imgElement;\nfunction imgElement(func) {\n  return function (element, messages) {\n    return promises.when(func(element)).then(function (result) {\n      var attributes = {};\n      if (element.altText) {\n        attributes.alt = element.altText;\n      }\n      _.extend(attributes, result);\n      return [Html.freshElement(\"img\", attributes)];\n    });\n  };\n}\n\n// Undocumented, but retained for backwards-compatibility with 0.3.x\nexports.inline = exports.imgElement;\nexports.dataUri = imgElement(function (element) {\n  return element.readAsBase64String().then(function (imageBuffer) {\n    return {\n      src: \"data:\" + element.contentType + \";base64,\" + imageBuffer\n    };\n  });\n});","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}