{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, INTERNAL, tryConvertToPromise, debug) {\n  var calledBind = false;\n  var rejectThis = function (_, e) {\n    this._reject(e);\n  };\n  var targetRejected = function (e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n  };\n  var bindingResolved = function (thisArg, context) {\n    if ((this._bitField & 50397184) === 0) {\n      this._resolveCallback(context.target);\n    }\n  };\n  var bindingRejected = function (e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n  };\n  Promise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n      calledBind = true;\n      Promise.prototype._propagateFrom = debug.propagateFromFunction();\n      Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n      var context = {\n        promiseRejectionQueued: false,\n        promise: ret,\n        target: target,\n        bindingPromise: maybePromise\n      };\n      target._then(INTERNAL, targetRejected, undefined, ret, context);\n      maybePromise._then(bindingResolved, bindingRejected, undefined, ret, context);\n      ret._setOnCancel(maybePromise);\n    } else {\n      ret._resolveCallback(target);\n    }\n    return ret;\n  };\n  Promise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n      this._bitField = this._bitField | 2097152;\n      this._boundTo = obj;\n    } else {\n      this._bitField = this._bitField & ~2097152;\n    }\n  };\n  Promise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n  };\n  Promise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n  };\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}