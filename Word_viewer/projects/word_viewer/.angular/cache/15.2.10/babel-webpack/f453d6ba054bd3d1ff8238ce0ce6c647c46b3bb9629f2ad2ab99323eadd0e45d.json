{"ast":null,"code":"var _ = require(\"underscore\");\nvar bluebird = require(\"bluebird/js/release/promise\")();\nexports.defer = defer;\nexports.when = bluebird.resolve;\nexports.resolve = bluebird.resolve;\nexports.all = bluebird.all;\nexports.props = bluebird.props;\nexports.reject = bluebird.reject;\nexports.promisify = bluebird.promisify;\nexports.mapSeries = bluebird.mapSeries;\nexports.attempt = bluebird.attempt;\nexports.nfcall = function (func) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  var promisedFunc = bluebird.promisify(func);\n  return promisedFunc.apply(null, args);\n};\nbluebird.prototype.fail = bluebird.prototype.caught;\nbluebird.prototype.also = function (func) {\n  return this.then(function (value) {\n    var returnValue = _.extend({}, value, func(value));\n    return bluebird.props(returnValue);\n  });\n};\nfunction defer() {\n  var resolve;\n  var reject;\n  var promise = new bluebird.Promise(function (resolveArg, rejectArg) {\n    resolve = resolveArg;\n    reject = rejectArg;\n  });\n  return {\n    resolve: resolve,\n    reject: reject,\n    promise: promise\n  };\n}","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}