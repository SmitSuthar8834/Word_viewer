import 'reflect-metadata';
import { checkTypeNameFormat } from '../../../internal/services';
import { setValidatorMetadata } from '../../../internal/utils';
/**
 * @internal
 */
// eslint-disable-next-line @typescript-eslint/naming-convention
export function CrtValidator(config) {
    if (!config) {
        return (type) => {
            // the decorator won't do anything by itself,
            // but will be used by the compiler to generate class metadata,
            // which is required for DI
        };
    }
    return function (type) {
        checkTypeNameFormat(config.type, 'ValidatorTypeName');
        const registrationConfig = {
            ...config,
            typeRef: type,
        };
        setValidatorMetadata(registrationConfig, type);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdG9yLmRlY29yYXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvZGV2a2l0L2NvbW1vbi9zcmMvbGliL3B1YmxpYy9kZWNvcmF0b3JzL3ZhbGlkYXRvci92YWxpZGF0b3IuZGVjb3JhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sa0JBQWtCLENBQUM7QUFFMUIsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDakUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUF3Qi9EOztHQUVHO0FBQ0gsZ0VBQWdFO0FBQ2hFLE1BQU0sVUFBVSxZQUFZLENBQUMsTUFBd0I7SUFDcEQsSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNaLE9BQU8sQ0FBQyxJQUF5QixFQUFFLEVBQUU7WUFDcEMsNkNBQTZDO1lBQzdDLCtEQUErRDtZQUMvRCwyQkFBMkI7UUFDNUIsQ0FBQyxDQUFDO0tBQ0Y7SUFDRCxPQUFPLFVBQVUsSUFBVTtRQUMxQixtQkFBbUIsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLG1CQUFtQixDQUFDLENBQUM7UUFDdEQsTUFBTSxrQkFBa0IsR0FBRztZQUMxQixHQUFHLE1BQU07WUFDVCxPQUFPLEVBQUUsSUFBSTtTQUNiLENBQUM7UUFDRixvQkFBb0IsQ0FBQyxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoRCxDQUFDLENBQUM7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdyZWZsZWN0LW1ldGFkYXRhJztcbmltcG9ydCB7QWJzdHJhY3RUeXBlLCBUeXBlfSBmcm9tICcuLi8uLi8uLi9iYXNlLWV4cG9ydHMnO1xuaW1wb3J0IHsgY2hlY2tUeXBlTmFtZUZvcm1hdCB9IGZyb20gJy4uLy4uLy4uL2ludGVybmFsL3NlcnZpY2VzJztcbmltcG9ydCB7IHNldFZhbGlkYXRvck1ldGFkYXRhIH0gZnJvbSAnLi4vLi4vLi4vaW50ZXJuYWwvdXRpbHMnO1xuaW1wb3J0IHsgVmFsaWRhdG9yQ29uZmlnIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3ZhbGlkYXRpb24vdmFsaWRhdG9yLWNvbmZpZyc7XG5cbi8qKlxuICogQHB1YmxpY1xuICogQGRlc2NyaXB0aW9uIERlY29yYXRvciB0byBkZWNsYXJlIHZhbGlkYXRvclxuICogQHBhcmFtIGNvbmZpZyAtIHZhbGlkYXRvciBjb25maWcge0BsaW5rIFZhbGlkYXRvckNvbmZpZ30uXG4gKiBJZiBubyBjb25maWcgaXMgcGFzc2VkLCB0aGUgdmFsaWRhdG9yIGNhbm5vdCBiZSBkZWNsYXJlZCwgYnV0IGNhbiBiZSB1c2VkIGFzIGEgYmFzZSBjbGFzcyBmb3IgYW5vdGhlciB2YWxpZGF0b3IuXG4gKlxuICogQGV4YW1wbGVcbiAqIEBDcnRWYWxpZGF0b3Ioe1xuICogICAgdHlwZTogJ2NydC5SZXF1aXJlZCcsXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFJlcXVpcmVkVmFsaWRhdG9yIGV4dGVuZHMgQmFzZVZhbGlkYXRvciB7XG4gKiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXN5bmMgPSBmYWxzZTtcbiAqICAgIHB1YmxpYyB2YWxpZGF0ZShjb250cm9sU3RhdGU6IENydENvbnRyb2xTdGF0ZSwgcGFyYW1zPzogVmFsaWRhdG9yUGFyYW1ldGVyc1ZhbHVlcyk6IENydFZhbGlkYXRpb25FcnJvcnMgfCBudWxsIHtcbiAqICAgICAgSW1wbGVtZW50YXRpb24gaGVyZS4uLlxuICogICAgfVxuICogfVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgZnVuY3Rpb24gQ3J0VmFsaWRhdG9yKGNvbmZpZzogVmFsaWRhdG9yQ29uZmlnKTogKHR5cGU6IFR5cGUpID0+IHZvaWQ7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgZnVuY3Rpb24gQ3J0VmFsaWRhdG9yKCk6ICh0eXBlOiBUeXBlIHwgQWJzdHJhY3RUeXBlKSA9PiB2b2lkO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuZXhwb3J0IGZ1bmN0aW9uIENydFZhbGlkYXRvcihjb25maWc/OiBWYWxpZGF0b3JDb25maWcpIHtcblx0aWYgKCFjb25maWcpIHtcblx0XHRyZXR1cm4gKHR5cGU6IFR5cGUgfCBBYnN0cmFjdFR5cGUpID0+IHtcblx0XHRcdC8vIHRoZSBkZWNvcmF0b3Igd29uJ3QgZG8gYW55dGhpbmcgYnkgaXRzZWxmLFxuXHRcdFx0Ly8gYnV0IHdpbGwgYmUgdXNlZCBieSB0aGUgY29tcGlsZXIgdG8gZ2VuZXJhdGUgY2xhc3MgbWV0YWRhdGEsXG5cdFx0XHQvLyB3aGljaCBpcyByZXF1aXJlZCBmb3IgRElcblx0XHR9O1xuXHR9XG5cdHJldHVybiBmdW5jdGlvbiAodHlwZTogVHlwZSk6IHZvaWQge1xuXHRcdGNoZWNrVHlwZU5hbWVGb3JtYXQoY29uZmlnLnR5cGUsICdWYWxpZGF0b3JUeXBlTmFtZScpO1xuXHRcdGNvbnN0IHJlZ2lzdHJhdGlvbkNvbmZpZyA9IHtcblx0XHRcdC4uLmNvbmZpZyxcblx0XHRcdHR5cGVSZWY6IHR5cGUsXG5cdFx0fTtcblx0XHRzZXRWYWxpZGF0b3JNZXRhZGF0YShyZWdpc3RyYXRpb25Db25maWcsIHR5cGUpO1xuXHR9O1xufVxuIl19