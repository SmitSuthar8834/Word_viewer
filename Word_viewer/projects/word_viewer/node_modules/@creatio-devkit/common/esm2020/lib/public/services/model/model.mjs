import { __decorate, __metadata } from "tslib";
import { ImplementUsingHandlerChain } from '../../../internal/decorators/implement-using-handler-chain';
import { BaseHandlerChainService } from '../../../internal/services/base-handler-chain.service';
/**
 * @internal
 */
export const _from = Symbol('CreateModelFrom');
/**
 * @public
 */
export class Model extends BaseHandlerChainService {
    constructor(crtModel) {
        super();
        /**
         * @internal
         */
        this.requestType = 'crt.ModelGenerator';
        this._crtModel = crtModel;
    }
    static get instance() {
        if (!this._instance) {
            this._instance = new Model();
        }
        return this._instance;
    }
    /**
     * @internal
     * Gets the model name.
     */
    get name() {
        return this._crtModel?.name;
    }
    /**
     * @internal
     */
    static [_from](crtModel) {
        return new Model(crtModel);
    }
    static async create(dataSchema) {
        const crtModel = await this.instance._create({
            type: 'crt.EntityDataSource',
            config: {
                entitySchemaName: dataSchema,
            },
        }, '');
        return new Model(crtModel);
    }
    getSchema() {
        return this._crtModel._getAsyncResult(this._crtModel.getSchema());
    }
    load(config) {
        return this._crtModel._getAsyncResult(this._crtModel.load(config));
    }
    insert(dto) {
        return this._crtModel._getAsyncResult(this._crtModel.insert(dto));
    }
    update(dto, parameters) {
        return this._crtModel._getAsyncResult(this._crtModel.update(dto, parameters));
    }
    copy(primaryColumnValue, data = {}) {
        return this._crtModel._getAsyncResult(this._crtModel.copy(primaryColumnValue, data));
    }
    create(data = {}) {
        return this._crtModel._getAsyncResult(this._crtModel.create(data));
    }
    delete(parameters) {
        return this._crtModel._getAsyncResult(this._crtModel.delete(parameters));
    }
    canSave(params) {
        return this._crtModel._getAsyncResult(this._crtModel.canSave(params));
    }
    canDelete(params) {
        return this._crtModel._getAsyncResult(this._crtModel.canDelete(params));
    }
}
__decorate([
    ImplementUsingHandlerChain({
        methodName: 'generateOne',
    }),
    __metadata("design:type", Function)
], Model.prototype, "_create", void 0);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2RldmtpdC9jb21tb24vc3JjL2xpYi9wdWJsaWMvc2VydmljZXMvbW9kZWwvbW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQVFBLE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBQ3hHLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxNQUFNLHVEQUF1RCxDQUFDO0FBRWhHOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRS9DOztHQUVHO0FBQ0gsTUFBTSxPQUFPLEtBQU0sU0FBUSx1QkFBdUI7SUFVakQsWUFBb0IsUUFBa0I7UUFDckMsS0FBSyxFQUFFLENBQUM7UUFOVDs7V0FFRztRQUNhLGdCQUFXLEdBQUcsb0JBQW9CLENBQUM7UUFJbEQsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUVPLE1BQU0sS0FBSyxRQUFRO1FBQzFCLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztTQUM3QjtRQUNELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN2QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsSUFBVyxJQUFJO1FBQ2QsT0FBTyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQztJQUM3QixDQUFDO0lBT0Q7O09BRUc7SUFDSSxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxRQUFrQjtRQUN2QyxPQUFPLElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVCLENBQUM7SUFFTSxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxVQUFrQjtRQUM1QyxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUMzQztZQUNDLElBQUksRUFBRSxzQkFBc0I7WUFDNUIsTUFBTSxFQUFFO2dCQUNQLGdCQUFnQixFQUFFLFVBQVU7YUFDNUI7U0FDRCxFQUNELEVBQUUsQ0FDRixDQUFDO1FBQ0YsT0FBTyxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBRU0sU0FBUztRQUNmLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFTSxJQUFJLENBQUMsTUFJWDtRQUNBLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRU0sTUFBTSxDQUFDLEdBQWU7UUFDNUIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFTSxNQUFNLENBQUMsR0FBZSxFQUFFLFVBQWdDO1FBQzlELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDL0UsQ0FBQztJQUVNLElBQUksQ0FBQyxrQkFBMEIsRUFBRSxPQUFtQixFQUFFO1FBQzVELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN0RixDQUFDO0lBRU0sTUFBTSxDQUFDLE9BQW1CLEVBQUU7UUFDbEMsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLENBQUM7SUFFTSxNQUFNLENBQUMsVUFBZ0M7UUFDN0MsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQzFFLENBQUM7SUFFTSxPQUFPLENBQUMsTUFBNEM7UUFDMUQsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFFTSxTQUFTLENBQUMsTUFBNEM7UUFDNUQsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7Q0FDRDtBQWhFQTtJQUFDLDBCQUEwQixDQUFDO1FBQzNCLFVBQVUsRUFBRSxhQUFhO0tBQ3pCLENBQUM7O3NDQUMyRSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VNb2RlbCwgRGF0YVNjaGVtYSB9IGZyb20gJy4uLy4uLy4uL2Jhc2UtZXhwb3J0cyc7XG5pbXBvcnQgeyBEYXRhU291cmNlQXR0cmlidXRlIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS1leHBvcnRzJztcbmltcG9ydCB7IERhdGFTb3VyY2VDYW5FeGVjdXRlT3BlcmF0aW9uUGF5bG9hZCwgRGF0YVNvdXJjZUNhbkV4ZWN1dGVPcGVyYXRpb25SZXN1bHQgfSBmcm9tICcuLi8uLi8uLi9iYXNlLWV4cG9ydHMnO1xuaW1wb3J0IHsgRGF0YVNvdXJjZVBhcmFtZXRlcnMgfSBmcm9tICcuLi8uLi8uLi9iYXNlLWV4cG9ydHMnO1xuaW1wb3J0IHsgRGF0YVNvdXJjZUxvYWRPcHRpb25zIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS1leHBvcnRzJztcbmltcG9ydCB7IERhdGFTb3VyY2VDb25maWcgfSBmcm9tICcuLi8uLi8uLi9iYXNlLWV4cG9ydHMnO1xuaW1wb3J0IHsgSnNvbkFycmF5LCBKc29uT2JqZWN0IH0gZnJvbSAnLi4vLi4vLi4vYmFzZS1leHBvcnRzJztcbmltcG9ydCB7IERhdGFTb3VyY2VTYXZlUmVzdWx0IH0gZnJvbSAnLi4vLi4vLi4vYmFzZS1leHBvcnRzJztcbmltcG9ydCB7IEltcGxlbWVudFVzaW5nSGFuZGxlckNoYWluIH0gZnJvbSAnLi4vLi4vLi4vaW50ZXJuYWwvZGVjb3JhdG9ycy9pbXBsZW1lbnQtdXNpbmctaGFuZGxlci1jaGFpbic7XG5pbXBvcnQgeyBCYXNlSGFuZGxlckNoYWluU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL2ludGVybmFsL3NlcnZpY2VzL2Jhc2UtaGFuZGxlci1jaGFpbi5zZXJ2aWNlJztcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNvbnN0IF9mcm9tID0gU3ltYm9sKCdDcmVhdGVNb2RlbEZyb20nKTtcblxuLyoqXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2RlbCBleHRlbmRzIEJhc2VIYW5kbGVyQ2hhaW5TZXJ2aWNlIGltcGxlbWVudHMgQmFzZU1vZGVsPERhdGFTb3VyY2VMb2FkT3B0aW9ucz4ge1xuXHRwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IE1vZGVsO1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuXHRwcml2YXRlIF9jcnRNb2RlbCE6IGFueTtcblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRwdWJsaWMgcmVhZG9ubHkgcmVxdWVzdFR5cGUgPSAnY3J0Lk1vZGVsR2VuZXJhdG9yJztcblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKGNydE1vZGVsPzogdW5rbm93bikge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fY3J0TW9kZWwgPSBjcnRNb2RlbDtcblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGdldCBpbnN0YW5jZSgpOiBNb2RlbCB7XG5cdFx0aWYgKCF0aGlzLl9pbnN0YW5jZSkge1xuXHRcdFx0dGhpcy5faW5zdGFuY2UgPSBuZXcgTW9kZWwoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX2luc3RhbmNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKiBHZXRzIHRoZSBtb2RlbCBuYW1lLlxuXHQgKi9cblx0cHVibGljIGdldCBuYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsPy5uYW1lO1xuXHR9XG5cblx0QEltcGxlbWVudFVzaW5nSGFuZGxlckNoYWluKHtcblx0XHRtZXRob2ROYW1lOiAnZ2VuZXJhdGVPbmUnLFxuXHR9KVxuXHRwcml2YXRlIF9jcmVhdGUhOiAoY29uZmlnOiBEYXRhU291cmNlQ29uZmlnLCBuYW1lOiBzdHJpbmcpID0+IFByb21pc2U8TW9kZWw+O1xuXG5cdC8qKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgW19mcm9tXShjcnRNb2RlbD86IHVua25vd24pOiBNb2RlbCB7XG5cdFx0cmV0dXJuIG5ldyBNb2RlbChjcnRNb2RlbCk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGFzeW5jIGNyZWF0ZShkYXRhU2NoZW1hOiBzdHJpbmcpOiBQcm9taXNlPE1vZGVsPiB7XG5cdFx0Y29uc3QgY3J0TW9kZWwgPSBhd2FpdCB0aGlzLmluc3RhbmNlLl9jcmVhdGUoXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6ICdjcnQuRW50aXR5RGF0YVNvdXJjZScsXG5cdFx0XHRcdGNvbmZpZzoge1xuXHRcdFx0XHRcdGVudGl0eVNjaGVtYU5hbWU6IGRhdGFTY2hlbWEsXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0JycsXG5cdFx0KTtcblx0XHRyZXR1cm4gbmV3IE1vZGVsKGNydE1vZGVsKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRTY2hlbWEoKTogUHJvbWlzZTxEYXRhU2NoZW1hPiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsLl9nZXRBc3luY1Jlc3VsdCh0aGlzLl9jcnRNb2RlbC5nZXRTY2hlbWEoKSk7XG5cdH1cblxuXHRwdWJsaWMgbG9hZChjb25maWc/OiB7XG5cdFx0YXR0cmlidXRlcz86IHN0cmluZ1tdIHwgRGF0YVNvdXJjZUF0dHJpYnV0ZVtdO1xuXHRcdHBhcmFtZXRlcnM/OiBEYXRhU291cmNlUGFyYW1ldGVycztcblx0XHRsb2FkT3B0aW9ucz86IERhdGFTb3VyY2VMb2FkT3B0aW9ucztcblx0fSk6IFByb21pc2U8SnNvbkFycmF5PiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsLl9nZXRBc3luY1Jlc3VsdCh0aGlzLl9jcnRNb2RlbC5sb2FkKGNvbmZpZykpO1xuXHR9XG5cblx0cHVibGljIGluc2VydChkdG86IEpzb25PYmplY3QpOiBQcm9taXNlPERhdGFTb3VyY2VTYXZlUmVzdWx0PiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsLl9nZXRBc3luY1Jlc3VsdCh0aGlzLl9jcnRNb2RlbC5pbnNlcnQoZHRvKSk7XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlKGR0bzogSnNvbk9iamVjdCwgcGFyYW1ldGVyczogRGF0YVNvdXJjZVBhcmFtZXRlcnMpOiBQcm9taXNlPERhdGFTb3VyY2VTYXZlUmVzdWx0PiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsLl9nZXRBc3luY1Jlc3VsdCh0aGlzLl9jcnRNb2RlbC51cGRhdGUoZHRvLCBwYXJhbWV0ZXJzKSk7XG5cdH1cblxuXHRwdWJsaWMgY29weShwcmltYXJ5Q29sdW1uVmFsdWU6IHN0cmluZywgZGF0YTogSnNvbk9iamVjdCA9IHt9KTogUHJvbWlzZTxKc29uT2JqZWN0PiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsLl9nZXRBc3luY1Jlc3VsdCh0aGlzLl9jcnRNb2RlbC5jb3B5KHByaW1hcnlDb2x1bW5WYWx1ZSwgZGF0YSkpO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZShkYXRhOiBKc29uT2JqZWN0ID0ge30pOiBQcm9taXNlPEpzb25PYmplY3Q+IHtcblx0XHRyZXR1cm4gdGhpcy5fY3J0TW9kZWwuX2dldEFzeW5jUmVzdWx0KHRoaXMuX2NydE1vZGVsLmNyZWF0ZShkYXRhKSk7XG5cdH1cblxuXHRwdWJsaWMgZGVsZXRlKHBhcmFtZXRlcnM6IERhdGFTb3VyY2VQYXJhbWV0ZXJzKTogUHJvbWlzZTxEYXRhU291cmNlU2F2ZVJlc3VsdD4ge1xuXHRcdHJldHVybiB0aGlzLl9jcnRNb2RlbC5fZ2V0QXN5bmNSZXN1bHQodGhpcy5fY3J0TW9kZWwuZGVsZXRlKHBhcmFtZXRlcnMpKTtcblx0fVxuXG5cdHB1YmxpYyBjYW5TYXZlKHBhcmFtczogRGF0YVNvdXJjZUNhbkV4ZWN1dGVPcGVyYXRpb25QYXlsb2FkKTogUHJvbWlzZTxEYXRhU291cmNlQ2FuRXhlY3V0ZU9wZXJhdGlvblJlc3VsdD4ge1xuXHRcdHJldHVybiB0aGlzLl9jcnRNb2RlbC5fZ2V0QXN5bmNSZXN1bHQodGhpcy5fY3J0TW9kZWwuY2FuU2F2ZShwYXJhbXMpKTtcblx0fVxuXG5cdHB1YmxpYyBjYW5EZWxldGUocGFyYW1zOiBEYXRhU291cmNlQ2FuRXhlY3V0ZU9wZXJhdGlvblBheWxvYWQpOiBQcm9taXNlPERhdGFTb3VyY2VDYW5FeGVjdXRlT3BlcmF0aW9uUmVzdWx0PiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NydE1vZGVsLl9nZXRBc3luY1Jlc3VsdCh0aGlzLl9jcnRNb2RlbC5jYW5EZWxldGUocGFyYW1zKSk7XG5cdH1cbn1cbiJdfQ==