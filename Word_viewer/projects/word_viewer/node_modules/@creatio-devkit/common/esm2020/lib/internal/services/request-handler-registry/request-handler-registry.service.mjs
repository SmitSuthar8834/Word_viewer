/**
 * @internal
 * @hostPublicApi available through window.creatio.requestHandlerRegistry
 */
export class InternalRequestHandlerRegistryType {
    /**
     * @publicHostApi
     */
    static get requestHandlersMap() {
        return this._requestHandlersMap;
    }
    /**
     * @publicHostApi
     */
    static onAddRequestHandler(handler) {
        this._addItemListeners.push(handler);
        return () => {
            this._addItemListeners.splice(this._addItemListeners.indexOf(handler), 1);
        };
    }
    /**
     * @publicHostApi
     */
    static onRemoveRequestHandler(handler) {
        this._removeItemListeners.push(handler);
        return () => {
            this._removeItemListeners.splice(this._removeItemListeners.indexOf(handler), 1);
        };
    }
    /**
     * @publicHostApi
     */
    static addRequestHandler(handlerType, config) {
        if (!this._requestHandlersMap.has(handlerType)) {
            this._requestHandlersMap.set(handlerType, config);
            for (const listener of this._addItemListeners) {
                listener(handlerType, config);
            }
        }
    }
    /**
     * @publicHostApi
     */
    static removeRequestHandler(handlerType) {
        const config = this._requestHandlersMap.get(handlerType);
        if (config) {
            this._requestHandlersMap.delete(handlerType);
            for (const listener of this._removeItemListeners) {
                listener(handlerType, config);
            }
        }
    }
}
InternalRequestHandlerRegistryType._addItemListeners = [];
InternalRequestHandlerRegistryType._removeItemListeners = [];
InternalRequestHandlerRegistryType._requestHandlersMap = new Map();
const global = window;
global.creatio ?? (global.creatio = {});
if (!global.creatio.requestHandlerRegistry) {
    Object.defineProperty(global.creatio, 'requestHandlerRegistry', {
        get: () => InternalRequestHandlerRegistryType,
        configurable: false,
    });
}
/**
 * @internal
 */
// eslint-disable-next-line @typescript-eslint/naming-convention
export const InternalRequestHandlerRegistry = InternalRequestHandlerRegistryType;
/**
 * @internal
 */
export class RequestHandlerRegistryService {
    /**
     * Register request handler class.
     * @param config Request handler registration config.
     * @param type Request handler type.
     */
    static register(config, type) {
        const requestType = config.requestType;
        const requestHandlerType = config.type;
        if (!requestType) {
            throw new Error(`Error when register ${requestHandlerType}. Request type not specified.`);
        }
        const requestHandlerMapValue = {
            instanceType: type,
            instanceConfig: config,
        };
        RequestHandlerRegistryService._internalRegistry.addRequestHandler(requestHandlerType, requestHandlerMapValue);
    }
}
RequestHandlerRegistryService._internalRegistry = global.creatio.requestHandlerRegistry;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWVzdC1oYW5kbGVyLXJlZ2lzdHJ5LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL2RldmtpdC9jb21tb24vc3JjL2xpYi9pbnRlcm5hbC9zZXJ2aWNlcy9yZXF1ZXN0LWhhbmRsZXItcmVnaXN0cnkvcmVxdWVzdC1oYW5kbGVyLXJlZ2lzdHJ5LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBd0NBOzs7R0FHRztBQUNILE1BQU0sT0FBTyxrQ0FBa0M7SUFLOUM7O09BRUc7SUFDSSxNQUFNLEtBQUssa0JBQWtCO1FBQ25DLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQ2pDLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxPQUFrQztRQUNuRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sR0FBRyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUMsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxPQUFxQztRQUN6RSxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3hDLE9BQU8sR0FBRyxFQUFFO1lBQ1gsSUFBSSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pGLENBQUMsQ0FBQztJQUNILENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxXQUFtQixFQUFFLE1BQThCO1FBQ2xGLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxFQUFFO1lBQy9DLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQ2xELEtBQUssTUFBTSxRQUFRLElBQUksSUFBSSxDQUFDLGlCQUFpQixFQUFFO2dCQUM5QyxRQUFRLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO2FBQzlCO1NBQ0Q7SUFDRixDQUFDO0lBRUQ7O09BRUc7SUFDSSxNQUFNLENBQUMsb0JBQW9CLENBQUMsV0FBbUI7UUFDckQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6RCxJQUFJLE1BQU0sRUFBRTtZQUNYLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDN0MsS0FBSyxNQUFNLFFBQVEsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7Z0JBQ2pELFFBQVEsQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDOUI7U0FDRDtJQUNGLENBQUM7O0FBdERjLG9EQUFpQixHQUFxQyxFQUFFLENBQUM7QUFDekQsdURBQW9CLEdBQXFDLEVBQUUsQ0FBQztBQUM1RCxzREFBbUIsR0FBRyxJQUFJLEdBQUcsRUFBa0MsQ0FBQztBQTREaEYsTUFBTSxNQUFNLEdBQUcsTUFBK0IsQ0FBQztBQUUvQyxNQUFNLENBQUMsT0FBTyxLQUFkLE1BQU0sQ0FBQyxPQUFPLEdBQUssRUFBUyxFQUFDO0FBRTdCLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLHNCQUFzQixFQUFFO0lBQzNDLE1BQU0sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSx3QkFBd0IsRUFBRTtRQUMvRCxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsa0NBQWtDO1FBQzdDLFlBQVksRUFBRSxLQUFLO0tBQ25CLENBQUMsQ0FBQztDQUNIO0FBRUQ7O0dBRUc7QUFDSCxnRUFBZ0U7QUFDaEUsTUFBTSxDQUFDLE1BQU0sOEJBQThCLEdBQUcsa0NBQWtDLENBQUM7QUFFakY7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNkJBQTZCO0lBR3pDOzs7O09BSUc7SUFDSSxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQXdDLEVBQUUsSUFBd0I7UUFDeEYsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztRQUN2QyxNQUFNLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDdkMsSUFBSSxDQUFDLFdBQVcsRUFBRTtZQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLHVCQUF1QixrQkFBa0IsK0JBQStCLENBQUMsQ0FBQztTQUMxRjtRQUNELE1BQU0sc0JBQXNCLEdBQTJCO1lBQ3RELFlBQVksRUFBRSxJQUFJO1lBQ2xCLGNBQWMsRUFBRSxNQUFNO1NBQ3RCLENBQUM7UUFDRiw2QkFBNkIsQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxrQkFBa0IsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDO0lBQy9HLENBQUM7O0FBbEJjLCtDQUFpQixHQUE4QyxNQUFNLENBQUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXIgfSBmcm9tICcuLi8uLi8uLi9iYXNlLWV4cG9ydHMnO1xuaW1wb3J0IHsgUmVxdWVzdEhhbmRsZXJSZWdpc3RyYXRpb25Db25maWcgfSBmcm9tICcuLi8uLi8uLi9pbnRlcm5hbC9tb2RlbHMnO1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICogQGhvc3RQdWJsaWNBcGlcbiAqL1xuZXhwb3J0IHR5cGUgUmVxdWVzdEhhbmRsZXJDdG9yID0gbmV3ICguLi5hcmdzOiB1bmtub3duW10pID0+IFJlcXVlc3RIYW5kbGVyO1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICogQGhvc3RQdWJsaWNBcGlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0SGFuZGxlck1hcFZhbHVlIHtcblx0Ly8gcmVnaW9uIEZpZWxkczogUHVibGljXG5cblx0cmVhZG9ubHkgaW5zdGFuY2VUeXBlOiBSZXF1ZXN0SGFuZGxlckN0b3I7XG5cdHJlYWRvbmx5IGluc3RhbmNlQ29uZmlnOiBSZXF1ZXN0SGFuZGxlclJlZ2lzdHJhdGlvbkNvbmZpZztcblxuXHQvLyBlbmRyZWdpb25cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBob3N0UHVibGljQXBpXG4gKi9cbmV4cG9ydCB0eXBlIEFkZFJlcXVlc3RIYW5kbGVyTGlzdGVuZXIgPSAocmVxdWVzdFR5cGU6IHN0cmluZywgcmVxdWVzdE1hcEluZm86IFJlcXVlc3RIYW5kbGVyTWFwVmFsdWUpID0+IHZvaWQ7XG5cbi8qKlxuICogQGludGVybmFsXG4gKiBAaG9zdFB1YmxpY0FwaVxuICovXG5leHBvcnQgdHlwZSBSZW1vdmVSZXF1ZXN0SGFuZGxlckxpc3RlbmVyID0gQWRkUmVxdWVzdEhhbmRsZXJMaXN0ZW5lcjtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBob3N0UHVibGljQXBpXG4gKi9cbmV4cG9ydCB0eXBlIFVuc3Vic2NyaWJlTGlzdGVuZXIgPSAoKSA9PiB2b2lkO1xuXG4vKipcbiAqIEBpbnRlcm5hbFxuICogQGhvc3RQdWJsaWNBcGkgYXZhaWxhYmxlIHRocm91Z2ggd2luZG93LmNyZWF0aW8ucmVxdWVzdEhhbmRsZXJSZWdpc3RyeVxuICovXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxSZXF1ZXN0SGFuZGxlclJlZ2lzdHJ5VHlwZSB7XG5cdHByaXZhdGUgc3RhdGljIF9hZGRJdGVtTGlzdGVuZXJzOiBBcnJheTxBZGRSZXF1ZXN0SGFuZGxlckxpc3RlbmVyPiA9IFtdO1xuXHRwcml2YXRlIHN0YXRpYyBfcmVtb3ZlSXRlbUxpc3RlbmVyczogQXJyYXk8QWRkUmVxdWVzdEhhbmRsZXJMaXN0ZW5lcj4gPSBbXTtcblx0cHJpdmF0ZSBzdGF0aWMgX3JlcXVlc3RIYW5kbGVyc01hcCA9IG5ldyBNYXA8c3RyaW5nLCBSZXF1ZXN0SGFuZGxlck1hcFZhbHVlPigpO1xuXG5cdC8qKlxuXHQgKiBAcHVibGljSG9zdEFwaVxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBnZXQgcmVxdWVzdEhhbmRsZXJzTWFwKCk6IE1hcDxzdHJpbmcsIFJlcXVlc3RIYW5kbGVyTWFwVmFsdWU+IHtcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdEhhbmRsZXJzTWFwO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwdWJsaWNIb3N0QXBpXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIG9uQWRkUmVxdWVzdEhhbmRsZXIoaGFuZGxlcjogQWRkUmVxdWVzdEhhbmRsZXJMaXN0ZW5lcik6IFVuc3Vic2NyaWJlTGlzdGVuZXIge1xuXHRcdHRoaXMuX2FkZEl0ZW1MaXN0ZW5lcnMucHVzaChoYW5kbGVyKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5fYWRkSXRlbUxpc3RlbmVycy5zcGxpY2UodGhpcy5fYWRkSXRlbUxpc3RlbmVycy5pbmRleE9mKGhhbmRsZXIpLCAxKTtcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwdWJsaWNIb3N0QXBpXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIG9uUmVtb3ZlUmVxdWVzdEhhbmRsZXIoaGFuZGxlcjogUmVtb3ZlUmVxdWVzdEhhbmRsZXJMaXN0ZW5lcik6IFVuc3Vic2NyaWJlTGlzdGVuZXIge1xuXHRcdHRoaXMuX3JlbW92ZUl0ZW1MaXN0ZW5lcnMucHVzaChoYW5kbGVyKTtcblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0dGhpcy5fcmVtb3ZlSXRlbUxpc3RlbmVycy5zcGxpY2UodGhpcy5fcmVtb3ZlSXRlbUxpc3RlbmVycy5pbmRleE9mKGhhbmRsZXIpLCAxKTtcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIEBwdWJsaWNIb3N0QXBpXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIGFkZFJlcXVlc3RIYW5kbGVyKGhhbmRsZXJUeXBlOiBzdHJpbmcsIGNvbmZpZzogUmVxdWVzdEhhbmRsZXJNYXBWYWx1ZSk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5fcmVxdWVzdEhhbmRsZXJzTWFwLmhhcyhoYW5kbGVyVHlwZSkpIHtcblx0XHRcdHRoaXMuX3JlcXVlc3RIYW5kbGVyc01hcC5zZXQoaGFuZGxlclR5cGUsIGNvbmZpZyk7XG5cdFx0XHRmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMuX2FkZEl0ZW1MaXN0ZW5lcnMpIHtcblx0XHRcdFx0bGlzdGVuZXIoaGFuZGxlclR5cGUsIGNvbmZpZyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEBwdWJsaWNIb3N0QXBpXG5cdCAqL1xuXHRwdWJsaWMgc3RhdGljIHJlbW92ZVJlcXVlc3RIYW5kbGVyKGhhbmRsZXJUeXBlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBjb25maWcgPSB0aGlzLl9yZXF1ZXN0SGFuZGxlcnNNYXAuZ2V0KGhhbmRsZXJUeXBlKTtcblx0XHRpZiAoY29uZmlnKSB7XG5cdFx0XHR0aGlzLl9yZXF1ZXN0SGFuZGxlcnNNYXAuZGVsZXRlKGhhbmRsZXJUeXBlKTtcblx0XHRcdGZvciAoY29uc3QgbGlzdGVuZXIgb2YgdGhpcy5fcmVtb3ZlSXRlbUxpc3RlbmVycykge1xuXHRcdFx0XHRsaXN0ZW5lcihoYW5kbGVyVHlwZSwgY29uZmlnKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cbnR5cGUgR2xvYmFsVHlwZSA9IFdpbmRvdyAmIHtcblx0Y3JlYXRpbzoge1xuXHRcdHJlcXVlc3RIYW5kbGVyUmVnaXN0cnk6IHR5cGVvZiBJbnRlcm5hbFJlcXVlc3RIYW5kbGVyUmVnaXN0cnlUeXBlO1xuXHR9O1xufTtcblxuY29uc3QgZ2xvYmFsID0gd2luZG93IGFzIHVua25vd24gYXMgR2xvYmFsVHlwZTtcblxuZ2xvYmFsLmNyZWF0aW8gPz89IHt9IGFzIGFueTtcblxuaWYgKCFnbG9iYWwuY3JlYXRpby5yZXF1ZXN0SGFuZGxlclJlZ2lzdHJ5KSB7XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWwuY3JlYXRpbywgJ3JlcXVlc3RIYW5kbGVyUmVnaXN0cnknLCB7XG5cdFx0Z2V0OiAoKSA9PiBJbnRlcm5hbFJlcXVlc3RIYW5kbGVyUmVnaXN0cnlUeXBlLFxuXHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdH0pO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG5leHBvcnQgY29uc3QgSW50ZXJuYWxSZXF1ZXN0SGFuZGxlclJlZ2lzdHJ5ID0gSW50ZXJuYWxSZXF1ZXN0SGFuZGxlclJlZ2lzdHJ5VHlwZTtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIFJlcXVlc3RIYW5kbGVyUmVnaXN0cnlTZXJ2aWNlIHtcblx0cHJpdmF0ZSBzdGF0aWMgX2ludGVybmFsUmVnaXN0cnk6IHR5cGVvZiBJbnRlcm5hbFJlcXVlc3RIYW5kbGVyUmVnaXN0cnlUeXBlID0gZ2xvYmFsLmNyZWF0aW8ucmVxdWVzdEhhbmRsZXJSZWdpc3RyeTtcblxuXHQvKipcblx0ICogUmVnaXN0ZXIgcmVxdWVzdCBoYW5kbGVyIGNsYXNzLlxuXHQgKiBAcGFyYW0gY29uZmlnIFJlcXVlc3QgaGFuZGxlciByZWdpc3RyYXRpb24gY29uZmlnLlxuXHQgKiBAcGFyYW0gdHlwZSBSZXF1ZXN0IGhhbmRsZXIgdHlwZS5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXIoY29uZmlnOiBSZXF1ZXN0SGFuZGxlclJlZ2lzdHJhdGlvbkNvbmZpZywgdHlwZTogUmVxdWVzdEhhbmRsZXJDdG9yKTogdm9pZCB7XG5cdFx0Y29uc3QgcmVxdWVzdFR5cGUgPSBjb25maWcucmVxdWVzdFR5cGU7XG5cdFx0Y29uc3QgcmVxdWVzdEhhbmRsZXJUeXBlID0gY29uZmlnLnR5cGU7XG5cdFx0aWYgKCFyZXF1ZXN0VHlwZSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBFcnJvciB3aGVuIHJlZ2lzdGVyICR7cmVxdWVzdEhhbmRsZXJUeXBlfS4gUmVxdWVzdCB0eXBlIG5vdCBzcGVjaWZpZWQuYCk7XG5cdFx0fVxuXHRcdGNvbnN0IHJlcXVlc3RIYW5kbGVyTWFwVmFsdWU6IFJlcXVlc3RIYW5kbGVyTWFwVmFsdWUgPSB7XG5cdFx0XHRpbnN0YW5jZVR5cGU6IHR5cGUsXG5cdFx0XHRpbnN0YW5jZUNvbmZpZzogY29uZmlnLFxuXHRcdH07XG5cdFx0UmVxdWVzdEhhbmRsZXJSZWdpc3RyeVNlcnZpY2UuX2ludGVybmFsUmVnaXN0cnkuYWRkUmVxdWVzdEhhbmRsZXIocmVxdWVzdEhhbmRsZXJUeXBlLCByZXF1ZXN0SGFuZGxlck1hcFZhbHVlKTtcblx0fVxufVxuIl19