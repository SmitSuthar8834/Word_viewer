const global = window;
/**
 * @internal
 */
export class BootstrapNotifier {
    static get instance() {
        if (!global.__crtModuleBootstrapNotifier) {
            global.__crtModuleBootstrapNotifier = new BootstrapNotifier();
        }
        return global.__crtModuleBootstrapNotifier;
    }
    constructor() {
        this._subscribers = new Set();
        // private constructor prevent instantiation via 'new' keyword
    }
    notify(moduleType) {
        for (const subscriber of this._subscribers.values()) {
            subscriber(moduleType);
        }
    }
    subscribe(subscriber) {
        this._subscribers.add(subscriber);
        return {
            unsubscribe: () => this._subscribers.delete(subscriber),
        };
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9vdHN0cmFwLW5vdGlmaWVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9kZXZraXQvY29tbW9uL3NyYy9saWIvaW50ZXJuYWwvc2VydmljZXMvYm9vdHN0cmFwLW5vdGlmaWVyL2Jvb3RzdHJhcC1ub3RpZmllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxNQUFNLE1BQU0sR0FBVyxNQUEyQixDQUFDO0FBY25EOztHQUVHO0FBQ0gsTUFBTSxPQUFPLGlCQUFpQjtJQUd0QixNQUFNLEtBQUssUUFBUTtRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLDRCQUE0QixFQUFFO1lBQ3pDLE1BQU0sQ0FBQyw0QkFBNEIsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7U0FDOUQ7UUFDRCxPQUFPLE1BQU0sQ0FBQyw0QkFBNEIsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7UUFUUSxpQkFBWSxHQUFHLElBQUksR0FBRyxFQUFjLENBQUM7UUFVNUMsOERBQThEO0lBQy9ELENBQUM7SUFFTSxNQUFNLENBQUMsVUFBZ0I7UUFDN0IsS0FBSyxNQUFNLFVBQVUsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3BELFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUN2QjtJQUNGLENBQUM7SUFFTSxTQUFTLENBQUMsVUFBc0I7UUFDdEMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDbEMsT0FBTztZQUNOLFdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUM7U0FDdkQsQ0FBQztJQUNILENBQUM7Q0FDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VHlwZX0gZnJvbSAnLi4vLi4vLi4vYmFzZS1leHBvcnRzJztcblxudHlwZSBHbG9iYWwgPSBXaW5kb3cgJiB7IF9fY3J0TW9kdWxlQm9vdHN0cmFwTm90aWZpZXI6IEJvb3RzdHJhcE5vdGlmaWVyIH07XG5jb25zdCBnbG9iYWw6IEdsb2JhbCA9IHdpbmRvdyBhcyB1bmtub3duIGFzIEdsb2JhbDtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuaW50ZXJmYWNlIFN1YnNjcmlwdGlvbiB7XG5cdHVuc3Vic2NyaWJlOiAoKSA9PiB2b2lkO1xufVxuXG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG50eXBlIFN1YnNjcmliZXIgPSAobW9kdWxlVHlwZTogVHlwZSkgPT4gdm9pZDtcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEJvb3RzdHJhcE5vdGlmaWVyIHtcblx0cHJpdmF0ZSBfc3Vic2NyaWJlcnMgPSBuZXcgU2V0PFN1YnNjcmliZXI+KCk7XG5cblx0cHVibGljIHN0YXRpYyBnZXQgaW5zdGFuY2UoKTogQm9vdHN0cmFwTm90aWZpZXIge1xuXHRcdGlmICghZ2xvYmFsLl9fY3J0TW9kdWxlQm9vdHN0cmFwTm90aWZpZXIpIHtcblx0XHRcdGdsb2JhbC5fX2NydE1vZHVsZUJvb3RzdHJhcE5vdGlmaWVyID0gbmV3IEJvb3RzdHJhcE5vdGlmaWVyKCk7XG5cdFx0fVxuXHRcdHJldHVybiBnbG9iYWwuX19jcnRNb2R1bGVCb290c3RyYXBOb3RpZmllcjtcblx0fVxuXG5cdHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG5cdFx0Ly8gcHJpdmF0ZSBjb25zdHJ1Y3RvciBwcmV2ZW50IGluc3RhbnRpYXRpb24gdmlhICduZXcnIGtleXdvcmRcblx0fVxuXG5cdHB1YmxpYyBub3RpZnkobW9kdWxlVHlwZTogVHlwZSk6IHZvaWQge1xuXHRcdGZvciAoY29uc3Qgc3Vic2NyaWJlciBvZiB0aGlzLl9zdWJzY3JpYmVycy52YWx1ZXMoKSkge1xuXHRcdFx0c3Vic2NyaWJlcihtb2R1bGVUeXBlKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3Vic2NyaWJlKHN1YnNjcmliZXI6IFN1YnNjcmliZXIpOiBTdWJzY3JpcHRpb24ge1xuXHRcdHRoaXMuX3N1YnNjcmliZXJzLmFkZChzdWJzY3JpYmVyKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dW5zdWJzY3JpYmU6ICgpID0+IHRoaXMuX3N1YnNjcmliZXJzLmRlbGV0ZShzdWJzY3JpYmVyKSxcblx0XHR9O1xuXHR9XG59XG4iXX0=